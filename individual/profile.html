<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Bizoforce Ecosystem</title>
    <link rel="stylesheet" href="../assets/css/dashboard.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <div class="sidebar-logo-img">
                <div class="sidebar-logo-icon">B</div>
                <div class="sidebar-logo-text">Bizoforce</div>
            </div>
        </div>
        <nav class="sidebar-menu" id="sidebarMenu">
            <!-- Navigation items will be generated by JavaScript -->
        </nav>
    </aside>

    <!-- Top Bar -->
    <div class="top-bar">
        <div class="search-bar">
            <span class="search-icon">üîç</span>
            <input type="text" class="search-input" placeholder="Search jobs, opportunities...">
        </div>
        <div class="user-section">
            <div class="wallet">üí∞ $0</div>
            <div class="notification-icon">
                üîî
                <div class="notification-badge">3</div>
            </div>
            <div class="user-avatar">JD</div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Page Header -->
        <div class="page-header" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(236, 72, 153, 0.08)); padding: 32px; border-radius: 16px; margin-bottom: 32px; border-left: 4px solid var(--purple);">
            <div>
                <h1 class="page-title gradient-text" style="font-size: 36px; margin-bottom: 8px;">My Profile</h1>
                <p class="page-subtitle" style="font-size: 16px; opacity: 0.8;">Build your professional profile to attract top opportunities</p>
            </div>
            <button class="btn btn-primary" style="display: flex; align-items: center; gap: 8px;" onclick="saveProfile()">
                <span>üíæ</span> Save Profile
            </button>
        </div>

        <!-- Profile Completion Banner -->
        <div class="stat-card-colored purple" style="margin-bottom: 24px; display: flex; align-items: center; padding: 28px; border-radius: 16px; box-shadow: 0 8px 24px rgba(139, 92, 246, 0.2);">
            <div style="flex: 1;">
                <div class="stats-label" style="margin-bottom: 8px; font-size: 14px; font-weight: 600;">Profile Strength</div>
                <div class="stats-value" id="profileStrength" style="font-size: 32px; font-weight: 800; margin-bottom: 12px;">45%</div>
                <div style="height: 10px; background: rgba(255, 255, 255, 0.25); border-radius: 10px; overflow: hidden;">
                    <div id="profileStrengthBar" style="height: 100%; width: 45%; background: linear-gradient(90deg, white, rgba(255, 255, 255, 0.8)); transition: width 0.5s; border-radius: 10px;"></div>
                </div>
            </div>
            <div class="stats-icon" style="font-size: 56px;">üë§</div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-cards-row">
            <div class="stat-card-colored orange">
                <div class="stats-icon">üìÑ</div>
                <div class="stats-value">12</div>
                <div class="stats-label">Applications</div>
            </div>
            <div class="stat-card-colored purple">
                <div class="stats-icon">üíº</div>
                <div class="stats-value">3</div>
                <div class="stats-label">Active Projects</div>
            </div>
            <div class="stat-card-colored green">
                <div class="stats-icon">‚è±</div>
                <div class="stats-value">124h</div>
                <div class="stats-label">Hours Logged</div>
            </div>
            <div class="stat-card-colored pink">
                <div class="stats-icon">üí∞</div>
                <div class="stats-value">$5,480</div>
                <div class="stats-label">Total Earnings</div>
            </div>
        </div>

        <!-- Profile Form -->
        <div class="card" style="border-left: 4px solid var(--primary-blue);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">üìù</span>
                    <span>Personal Information</span>
                </h2>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-input" id="fullName" placeholder="John Doe">
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-input" id="email" placeholder="john@example.com">
                </div>

                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" id="phone" placeholder="+1 (555) 000-0000">
                </div>

                <div class="form-group">
                    <label class="form-label">Location</label>
                    <input type="text" class="form-input" id="location" placeholder="City, Country">
                </div>

                <div class="form-group full-width">
                    <label class="form-label">Professional Title</label>
                    <input type="text" class="form-input" id="title" placeholder="e.g., Senior Software Engineer">
                </div>

                <div class="form-group full-width">
                    <label class="form-label">About Me</label>
                    <textarea class="form-input" id="bio" rows="4" placeholder="Tell us about your experience, skills, and what you're looking for..."></textarea>
                </div>
            </div>
        </div>

        <!-- Skills Section -->
        <div class="card" style="border-left: 4px solid var(--warning);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">‚ö°</span>
                    <span>Skills & Expertise</span>
                </h2>
            </div>

            <div class="form-group">
                <label class="form-label">Skills (Press Enter to add)</label>
                <div class="tag-input-container" id="skillsContainer" style="border: 2px solid var(--border-light); border-radius: 12px; padding: 12px; transition: border-color 0.3s;">
                    <input type="text" class="tag-input" id="skillsInput" placeholder="e.g., JavaScript, Project Management, Marketing" style="border: none;">
                </div>
                <small class="form-hint">Add your top skills to match with relevant opportunities</small>
            </div>
        </div>

        <!-- Experience Section -->
        <div class="card" style="border-left: 4px solid var(--info);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">üíº</span>
                    <span>Work Experience</span>
                </h2>
                <button class="btn btn-secondary btn-sm" onclick="addExperience()">+ Add Experience</button>
            </div>

            <div id="experienceContainer">
                <div class="info-card" style="background: linear-gradient(135deg, rgba(37, 99, 235, 0.03), rgba(249, 115, 22, 0.03)); border-left: 3px solid var(--primary-blue);">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                        <div>
                            <strong style="display: block; color: var(--text-dark); margin-bottom: 4px;">Senior Developer</strong>
                            <small style="color: var(--primary-blue);">TechCorp Inc. ‚Ä¢ 2020 - Present</small>
                        </div>
                        <button class="btn-icon danger" onclick="this.closest('.info-card').remove()" title="Remove">‚úï</button>
                    </div>
                    <p style="color: var(--text-gray); font-size: 14px; margin: 0;">Led development team of 5 engineers, delivered 10+ projects successfully.</p>
                </div>
            </div>
        </div>

        <!-- Education Section -->
        <div class="card" style="border-left: 4px solid var(--success);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">üéì</span>
                    <span>Education</span>
                </h2>
                <button class="btn btn-secondary btn-sm" onclick="addEducation()">+ Add Education</button>
            </div>

            <div id="educationContainer">
                <div class="info-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.03), rgba(52, 211, 153, 0.03)); border-left: 3px solid var(--success);">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <strong style="display: block; color: var(--text-dark); margin-bottom: 4px;">Bachelor of Computer Science</strong>
                            <small style="color: var(--primary-blue);">State University ‚Ä¢ 2016 - 2020</small>
                        </div>
                        <button class="btn-icon danger" onclick="this.closest('.info-card').remove()" title="Remove">‚úï</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documents Section -->
        <div class="card" style="border-left: 4px solid var(--accent-orange);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">üìÅ</span>
                    <span>Documents & Portfolio</span>
                </h2>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Resume/CV</label>
                    <input type="file" class="form-input" id="resume" accept=".pdf,.doc,.docx">
                    <small class="form-hint">Upload your latest resume (PDF, DOC, DOCX)</small>
                </div>

                <div class="form-group">
                    <label class="form-label">Portfolio Link</label>
                    <input type="url" class="form-input" id="portfolio" placeholder="https://yourportfolio.com">
                </div>

                <div class="form-group">
                    <label class="form-label">LinkedIn Profile</label>
                    <input type="url" class="form-input" id="linkedin" placeholder="https://linkedin.com/in/yourprofile">
                </div>

                <div class="form-group">
                    <label class="form-label">GitHub Profile</label>
                    <input type="url" class="form-input" id="github" placeholder="https://github.com/yourusername">
                </div>
            </div>
        </div>

        <!-- Preferences Section -->
        <div class="card" style="border-left: 4px solid var(--purple);">
            <div class="card-header">
                <h2 class="card-title" style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 24px;">‚öôÔ∏è</span>
                    <span>Job Preferences</span>
                </h2>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Expected Salary ($/year)</label>
                    <input type="number" class="form-input" id="salary" placeholder="80000">
                </div>

                <div class="form-group">
                    <label class="form-label">Job Type</label>
                    <select class="form-input" id="jobType">
                        <option value="">Select job type</option>
                        <option value="full-time">Full-time</option>
                        <option value="part-time">Part-time</option>
                        <option value="contract">Contract</option>
                        <option value="freelance">Freelance</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Work Mode</label>
                    <select class="form-input" id="workMode">
                        <option value="">Select work mode</option>
                        <option value="remote">Remote</option>
                        <option value="hybrid">Hybrid</option>
                        <option value="onsite">On-site</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Availability</label>
                    <select class="form-input" id="availability">
                        <option value="">Select availability</option>
                        <option value="immediate">Immediate</option>
                        <option value="2weeks">2 Weeks Notice</option>
                        <option value="1month">1 Month Notice</option>
                        <option value="not-looking">Not Currently Looking</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/dashboard.js"></script>
    <script>
        // Set userType for individual users
        localStorage.setItem('userType', 'individual');
        
        // Check if user has extracted resume data and populate form
        const extractedData = localStorage.getItem('extractedResumeData');
        if (extractedData) {
            try {
                const data = JSON.parse(extractedData);
                // Auto-populate form fields if data exists
                if (data.name) {
                    const nameParts = data.name.split(' ');
                    if (nameParts.length >= 2) {
                        document.getElementById('firstName') && (document.getElementById('firstName').value = nameParts[0]);
                        document.getElementById('lastName') && (document.getElementById('lastName').value = nameParts.slice(1).join(' '));
                    }
                }
                if (data.email) document.getElementById('email') && (document.getElementById('email').value = data.email);
                if (data.phone) document.getElementById('phone') && (document.getElementById('phone').value = data.phone);
                if (data.role) document.getElementById('currentRole') && (document.getElementById('currentRole').value = data.role);
            } catch (e) {
                console.log('Could not parse extracted resume data');
            }
        }
        
        // Generate navigation
        generateNavigation('profile');
        
        // Tag input for skills
        const skillsInput = document.getElementById('skillsInput');
        const skillsContainer = document.getElementById('skillsContainer');
        const skills = [];

        skillsInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                e.preventDefault();
                const skill = this.value.trim();
                if (!skills.includes(skill)) {
                    skills.push(skill);
                    addSkillTag(skill);
                    this.value = '';
                }
            }
        });

        function addSkillTag(skill) {
            const tag = document.createElement('span');
            tag.className = 'tag';
            tag.innerHTML = `
                ${skill}
                <button class="tag-remove" onclick="removeSkill('${skill}', this)">√ó</button>
            `;
            skillsContainer.insertBefore(tag, skillsInput);
        }

        function removeSkill(skill, btn) {
            const index = skills.indexOf(skill);
            if (index > -1) skills.splice(index, 1);
            btn.parentElement.remove();
        }

        function addExperience() {
            const container = document.getElementById('experienceContainer');
            const exp = document.createElement('div');
            exp.className = 'info-card';
            exp.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <div>
                        <input type="text" class="form-input" placeholder="Job Title" style="margin-bottom: 8px;">
                        <input type="text" class="form-input" placeholder="Company Name ‚Ä¢ Year - Year" style="font-size: 14px;">
                    </div>
                    <button class="btn-icon danger" onclick="this.closest('.info-card').remove()" title="Remove">‚úï</button>
                </div>
                <textarea class="form-input" rows="2" placeholder="Describe your responsibilities and achievements..."></textarea>
            `;
            container.appendChild(exp);
        }

        function addEducation() {
            const container = document.getElementById('educationContainer');
            const edu = document.createElement('div');
            edu.className = 'info-card';
            edu.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex: 1;">
                        <input type="text" class="form-input" placeholder="Degree / Certification" style="margin-bottom: 8px;">
                        <input type="text" class="form-input" placeholder="Institution ‚Ä¢ Year - Year" style="font-size: 14px;">
                    </div>
                    <button class="btn-icon danger" onclick="this.closest('.info-card').remove()" title="Remove">‚úï</button>
                </div>
            `;
            container.appendChild(edu);
        }

        function saveProfile() {
            // Collect form data
            const profileData = {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                title: document.getElementById('title').value,
                bio: document.getElementById('bio').value,
                skills: skills,
                portfolio: document.getElementById('portfolio').value,
                linkedin: document.getElementById('linkedin').value,
                github: document.getElementById('github').value,
                salary: document.getElementById('salary').value,
                jobType: document.getElementById('jobType').value,
                workMode: document.getElementById('workMode').value,
                availability: document.getElementById('availability').value
            };

            // Save to localStorage
            localStorage.setItem('individualProfile', JSON.stringify(profileData));

            // Show success message
            alert('Profile saved successfully! üéâ');
        }

        // Calculate profile strength
        function updateProfileStrength() {
            const fields = [
                document.getElementById('fullName').value,
                document.getElementById('email').value,
                document.getElementById('title').value,
                document.getElementById('bio').value,
                skills.length > 0,
                document.getElementById('salary').value,
                document.getElementById('jobType').value
            ];

            const completed = fields.filter(f => f).length;
            const percentage = Math.round((completed / fields.length) * 100);

            document.getElementById('profileStrength').textContent = percentage + '%';
            document.getElementById('profileStrengthBar').style.width = percentage + '%';
        }

        // Add event listeners to update profile strength
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('input', updateProfileStrength);
            input.addEventListener('change', updateProfileStrength);
        });

        // Load saved profile data
        window.addEventListener('DOMContentLoaded', function() {
            const saved = localStorage.getItem('individualProfile');
            if (saved) {
                const data = JSON.parse(saved);
                if (data.fullName) document.getElementById('fullName').value = data.fullName;
                if (data.email) document.getElementById('email').value = data.email;
                if (data.phone) document.getElementById('phone').value = data.phone;
                if (data.location) document.getElementById('location').value = data.location;
                if (data.title) document.getElementById('title').value = data.title;
                if (data.bio) document.getElementById('bio').value = data.bio;
                if (data.portfolio) document.getElementById('portfolio').value = data.portfolio;
                if (data.linkedin) document.getElementById('linkedin').value = data.linkedin;
                if (data.github) document.getElementById('github').value = data.github;
                if (data.salary) document.getElementById('salary').value = data.salary;
                if (data.jobType) document.getElementById('jobType').value = data.jobType;
                if (data.workMode) document.getElementById('workMode').value = data.workMode;
                if (data.availability) document.getElementById('availability').value = data.availability;
                
                if (data.skills && data.skills.length > 0) {
                    data.skills.forEach(skill => {
                        skills.push(skill);
                        addSkillTag(skill);
                    });
                }

                updateProfileStrength();
            }
        });
    </script>
</body>
</html>
